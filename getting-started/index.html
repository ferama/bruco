<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en-us lang=en-us><head><link href=https://gmpg.org/xfn/11 rel=profile><meta charset=utf-8><meta name=generator content="Hugo 0.83.1"><meta name=viewport content="width=device-width,initial-scale=1"><title>Getting started on k8s &#183; Bruco</title><meta name=description content><link type=text/css rel=stylesheet href=https://ferama.github.io/bruco/css/print.css media=print><link type=text/css rel=stylesheet href=https://ferama.github.io/bruco/css/poole.css><link type=text/css rel=stylesheet href=https://ferama.github.io/bruco/css/syntax.css><link type=text/css rel=stylesheet href=https://ferama.github.io/bruco/css/hyde.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=apple-touch-icon-precomposed sizes=144x144 href=/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=/favicon.png></head><body class=theme-base-0b><aside class=sidebar><div class="container sidebar-sticky"><div class=sidebar-about><a href=https://ferama.github.io/bruco/><h1>Bruco</h1></a><p class=lead></p></div><nav><ul class=sidebar-nav><li><a href=https://ferama.github.io/bruco/>Home</a></li><li><a href=/bruco/getting-started>Getting started on k8s</a></li><li><a href=https://github.com/ferama/bruco><i class="fab fa-github"></i> Bruco on Github</a></li></ul></nav><p>&copy; 2021. All rights reserved.</p></div></aside><main class="content container"><div class=post><h1>Getting started on k8s</h1><p>This guide will introduce you to the <strong>bruco</strong> concept e will help to get the stuff up and running quickly.</p><p>This tutorial make some assumptions:</p><ol><li>You have a kubernetes environment up and running</li><li>You have correctly configured the <strong>kubectl</strong> cli tool to interact with the env above</li></ol><p>Bruco is heavily integrated with Kubernetes. To get start to experiment with bruco function deployment you need to setup some stuff on kubernetes first.</p><p>Bruco defines a custom resource for its functions. The resource is called guess that, bruco :)</p><p>This is a sample resource instance that you will able to create:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>brucocontroller.ferama.github.com/v1alpha1</span>
<span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Bruco</span>
<span style=color:#f92672>metadata</span>:
  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>example-bruco</span>
<span style=color:#f92672>spec</span>:
  <span style=color:#f92672>replicas</span>: <span style=color:#ae81ff>1</span>
  <span style=color:#f92672>functionURL</span>: <span style=color:#ae81ff>https://github.com/ferama/bruco/raw/main/hack/examples/zipped/sentiment.zip</span>
</code></pre></div><p>but before that, you need to create the custom resource definition on k8s and to deploy the controller supporting the custom resource.</p><p>Follow this steps to do that:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=color:#75715e># create a new k8s namespace for bruco</span>
$ kubectl create ns bruco

<span style=color:#75715e># create the custom resource</span>
$ kubectl -n bruco apply -f https://raw.githubusercontent.com/ferama/bruco/main/hack/k8s/resources/crd-bruco.yaml

<span style=color:#75715e># deploy the bruco controller</span>
$ kubectl -n bruco apply -f https://raw.githubusercontent.com/ferama/bruco/main/hack/k8s/resources/controller.yaml
</code></pre></div><p>TODO:</p></div></main></body></html>